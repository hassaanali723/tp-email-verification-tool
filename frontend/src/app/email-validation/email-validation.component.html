<!-- email-validation.component.html -->
<div class="container">
    <!-- Header with "New List" Button -->
    <div class="header">
      <button class="btn btn-primary" (click)="fileInput.click()">+ New List</button>
      <input
        #fileInput
        type="file"
        style="display: none;"
        (change)="onFileSelected($event)"
        accept=".xlsx,.xls,.csv"
      />
      <input
        class="search-box"
        type="text"
        placeholder="Type something to search"
      />
    </div>
  
    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>
  
    <!-- File Boxes -->
    <div class="lists">
      <div *ngFor="let list of lists" class="list-box">
          <!-- Add delete button -->
        <button class="delete-button" (click)="deleteFile(list.fileId)">Ã—</button>
        <div class="list-box__header">
          <h3 class="list-box__title">{{ list.fileName }}</h3>
          <p class="list-box__source">ðŸ“‚ My Computer</p>
        </div>
  
        <div class="list-box__content">
          <div class="progress-circle">
            <span *ngIf="list.status === 'uploaded'">{{ list.emailsReady }}</span>
            <span *ngIf="list.status === 'verified'">
              {{ list.deliverableRate || 100 | number:'1.0-0' }}%
            </span>
          </div>
          <p class="list-box__status">
            <span *ngIf="list.status === 'uploaded'">Emails Ready</span>
            <span *ngIf="list.status === 'verified'">Deliverable</span>
          </p>
        </div>
  
        <!-- Buttons -->
        <div class="list-box__actions">
          <button
              *ngIf="list.status === 'uploaded'"
              class="btn btn-success"
              (click)="verifyFile(list)"
              [disabled]="list.isProcessing"
            >
              {{ list.isProcessing ? 'Verifying...' : 'Verify' }}
            </button>
          <button
            *ngIf="list.status === 'verified'"
            class="btn btn-primary"
            (click)="viewResults(list); $event.preventDefault()"
          >
            View Results â†’
          </button>
        </div>
      </div>
    </div>
  </div>